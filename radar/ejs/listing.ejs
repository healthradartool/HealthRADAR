```{=html}

<div class="dropdown-container">
  <!--- Theme dropdown-->
  <div class="dropdown-wrapper">
    <select id="theme">
      <option value="">Theme</option>
      <% if (templateParams && templateParams.theme && templateParams.theme.length > 0) { %>
        <% templateParams.theme.forEach(function(theme) { %>
          <option value="<%= theme %>"><%= theme %></option>
        <% }); %>
      <% } %>
    </select>
  </div>
  <!--- Time dropdown-->
  <div class="dropdown-wrapper">
    <select id="time">
      <option value="">Time</option>
      <% if (templateParams && templateParams.time && templateParams.time.length > 0) { %>
        <% templateParams.time.forEach(function(time) { %>
          <option value="<%= time %>"><%= time %></option>
        <% }); %>
      <% } %>
    </select>
  </div>
  <!--- Geography dropdown-->
  <div class="dropdown-wrapper">
    <select id="geography">
      <option value="">Geography</option>
      <% if (templateParams && templateParams.geography && templateParams.geography.length > 0) { %>
        <% templateParams.geography.forEach(function(category) { %>
          <option value="<%= category %>"><%= category %></option>
        <% }); %>
      <% } %>
    </select>
  </div>
  <!--- Other dropdown-->
  <div class="dropdown-wrapper">
    <select id="other">
      <option value="">Other</option>
      <% if (templateParams && templateParams.other && templateParams.other.length > 0) { %>
        <% templateParams.other.forEach(function(other) { %>
          <option value="<%= other %>"><%= other %></option>
        <% }); %>
      <% } %>
    </select>
  </div>
  <!-- Reset Button -->
  <button id="resetButton" class="btn btn-primary">Reset Selections</button>
</div>
<!--- show the listing -->
<div class="list grid">
  <% for (const item of items) { %>
    <div class="card border-1 rounded-2 g-col-12 g-col-sm-6 g-col-md-4 mb-2" <%=metadataAttrs(item) %>>
      <p class="card-img-top"><img src="<%- item.image %>" class="thumbnail-image card-img"></p>
      <div class="card-body post-contents">
        <h5 class="no-anchor"><a href="<%- item.path %>" class="no-anchor card-title listing-title">
            <%= item.title %>
          </a></h5>
        <div class="listing-categories">
          <% if (Array.isArray(item.categories)) { %>
            <% item.categories.forEach(category=> { %>
              <div class="listing-category me-1">
                <a class="card-tag" href="/radar/data.html#category=<%= category %>"><%= category %></a>
              </div>
              <% }) %>
                <% } %>
        </div>
        <p class="listing-description"><%- item.description %></p>
      </div>
    </div>
    <% } %>
</div>

<script>
  // Function to update the URL fragment based on selected dropdown values
  function updateUrl() {
    const time = document.getElementById("time").value;
    const geography = document.getElementById("geography").value;
    const theme = document.getElementById("theme").value;
    const other = document.getElementById("other").value;
  
    const filters = [];
    if (time) filters.push("category=" + time);
    if (geography) filters.push("category=" + geography);
    if (theme) filters.push("category=" + theme);
    if (other) filters.push("category=" + other);
  
    const urlFragment = filters.length > 0 ? "#" + filters.join("&") : "";
    
    const baseUrl = window.location.href.replace(/#.*$/g, "");
    window.location = baseUrl + urlFragment;
  }
  
  // Attach change event listeners to all dropdowns
  document.querySelectorAll('.dropdown-wrapper select').forEach(dropdown => {
    dropdown.onchange = updateUrl;
  });
  
  // Reset function to clear selections
  function resetSelections() {
    document.getElementById("time").selectedIndex = 0;
    document.getElementById("geography").selectedIndex = 0;
    document.getElementById("theme").selectedIndex = 0;
    document.getElementById("other").selectedIndex = 0;
  
    // Also update the URL to remove any filters
    updateUrl();
  }
  
  // Attach click event listener to the reset button
  document.getElementById("resetButton").onclick = resetSelections;
  
</script>
```
















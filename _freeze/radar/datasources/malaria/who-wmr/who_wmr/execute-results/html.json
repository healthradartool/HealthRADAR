{
  "hash": "647fa513b96ef29f1fb2c470c611f401",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"World Malaria Report\"\ndescription: \"The report provides a comprehensive and up-to-date assessment of trends in malaria control and elimination across the globe.\"\ndate: 07/03/2024 # mm-dd-yyyy\nimage: \"images/wmr-covers-2023.jpg\"\nlightbox: true # for images\nexecute:\n  message: false\n  warning: false\n\nlanguage: \n  title-block-published: \"Last updated\"\n  \npage-layout: full\ntitle-block-banner: \"#EDF3F9\"\ntitle-block-banner-color: \"#212529\"\ncategories:\n  - malaria\n  - epidemiology\n  - interventions\n  - country-level\n  - annual\n---\n\n\n\n\n\n\n::: {.page-tabs .panel-tabset}\n\n## Overview\n\n<h2>About the data</h2>\n\nThe WHO World Malaria report, released on an annual basis, provides a comprehensive and up-to-date assessment of trends in malaria control and elimination across the globe. The annexes to the report provide useful information on the data sources and methods used to compile the World Malaria Report, a set of regional malaria profiles and tables of historical time series of case data, commodity distribution, funding amounts and policy adoption.\n\nThese datasets provide information on long term trends in malaria control and enable comparison between countries. The data provided are on an annual time scale at the national level, and would not be suitable for subnational analysis or to explore seasonal trends in malaria.\n\n\n<h2>Accessing the data</h2> \n\n\nThe reports can be accessed on the [WHO website](https://www.who.int/teams/global-malaria-programme/reports). Each report has a web page which includes useful contextual information as well as additional resources. The “Annexes in Excel format” will download as a zip file which should be extracted. The annexes can be viewed in the original report in PDF format, though for modelling it is usually preferable to have an excel spreadsheet.\n\nThe most recent report may not contain all years of estimates. Should earlier years be required, one can access the annexes from earlier reports and merge these.\n\n<h2>What does the data look like?</h2> \n\n**Description**\n\nThe list of annexes may vary annually. The information included typically looks like this. Data are available for each country and annually. Some datasheets contain a few years of data, while others report data for the most recent year. To make a longer time series of data, you can access older world malaria reports and annexes from the WHO. Be careful to check the data definitions and information on methodology to be sure that data sets can be concatenated.\n\nThe annexes can be found in the report itself as in the following examples:\n\n![](images/annex4F.png \"WHO World Malaria Report 2023 Annex 4F\")\n\n![](images/annex4H.png \"WHO World Malaria Report 2023 Annex 4H\")\n\nThe annexes can also be downloaded as Excel documents from the report page.\n\n|         |                                                                                                              |\n|-----------------------|------------------------------------------------|\n| Annex 1 | Data sources and methods                                                                                     |\n| Annex 2 | Number of ITNs distributed through campaigns in malaria endemic countries                                    |\n| Annex 3 | WHO Regional profiles                                                                                        |\n| Annex 4 | Data tables and methods                                                                                      |\n|         | A. Policy adoption                                                                                           |\n|         | B. Antimalarial drug policy                                                                                  |\n|         | C. Funding for malaria control                                                                               |\n|         | D. Commodities distribution and coverage                                                                     |\n|         | E. Household survey results                                                                                  |\n|         | F. Population denominator for case incidence and mortality rate, and estimated malaria cases and deaths      |\n|         | G. Population denominator for case incidence and mortality rate, and reported malaria cases by place of care |\n|         | H. Reported malaria cases by method of confirmation                                                          |\n|         | I. Reported malaria cases by species                                                                         |\n|         | J. Reported malaria deaths                                                                                   |\n|         | K. Methods for Tables A-D-G-H-I-J                                                                            |\n\n: Example of the annex layout. This example is from the 2023 world malaria report. Note that the annexes are paired with the report and should be interpreted as such.\n\n<h2>Key points to consider</h2> \n\n**Pitfalls of Annual Data:**\n\nUsing annual data for your analysis can lead to several pitfalls:\n\n-   Seasonal variations: Annual data may not capture the seasonal patterns of malaria transmission, which can be influenced by factors such as rainfall, temperature, and vector abundance. This can lead to an over- or underestimation of the disease burden and the impact of interventions.\n\n-   Temporal aggregation: Aggregating data annually may mask important short-term dynamics, such as outbreaks or the immediate impact of interventions.\n\n**Reporting - Incidence vs. Prevalence Data:**\n\nIt is important to distinguish between incidence and prevalence data when performing your analysis:\n\n-   Incidence data: Incidence refers to the number of new cases of malaria occurring in a population over a specified period. It provides information on the rate at which new infections occur and is more sensitive to changes in transmission dynamics.\n\n-   Prevalence data: Prevalence refers to the proportion of the population that has malaria at a given point in time. It provides a snapshot of the disease burden but does not capture the rate of new infections.\n\n**Difference between Policy and Implementation:**\n\nThere can be discrepancies between the intended policy for ITN distribution and the actual implementation on the ground. Consider the following:\n\n-   Coverage: The planned ITN coverage may differ from the actual coverage achieved due to factors such as logistics, access to remote areas, and population acceptance.\n\n-   Timing: The timing of ITN distribution campaigns may vary from the planned schedule. This can affect the impact of ITNs on malaria transmission, particularly if the distribution does not align with peak transmission seasons.\n\n-   Effectiveness: The effectiveness of ITNs may differ from the ideal scenario due to factors such as improper usage, wear and tear, and insecticide resistance.\n\n**National Level - Ignoring Spatial Heterogeneity:**\n\nModelling malaria transmission at a national level can overlook important spatial heterogeneities:\n\n-   Regional variations: Malaria transmission can vary significantly between different regions within a country due to differences in climate, vector ecology, and socio-economic factors.\n\n-   Local hotspots: Even within regions, there can be local hotspots of malaria transmission due to factors such as proximity to breeding sites, population density, and human behavior.\n\n-   Population movement: The movement of people between different areas can introduce or reintroduce malaria parasites, affecting transmission dynamics.\n\n**Examples of data use in literature**\n\nThe report came out on Jan 31, 2024, so there are not many studies that have used the data yet. However, here are a few that are either under review or have been published recently:\n\n-   [Assessing the Therapeutic Efficacy of Artemether-Lumefantrine for Uncomplicated Malaria in Lagos, Nigeria: A Comprehensive Study on Treatment Response and Resistance Markers](https://doi.org/10.21203/rs.3.rs-3985557/v1)\n\n-   [Design, synthesis and Anti-Plasmodial activity of Mortiamide-Lugdunin conjugates](https://doi.org/10.1016/j.bioorg.2024.107307)\n\n## Working with the data\n\n<h2>How to use this data?</h2>\n\nFor this example, the goal is to get the reported malaria deaths for the elimination 8 (E8) countries, but your specific analysis may require different data.\n\nWe can either manually download, unzip and read in annex 4J or use the `whowmr` package to access the data. \n\n::: callout-warning\nThe annexes contain references to footnotes. The `whowmr` package leaves these in the data - the idea being that one should engage with the footnote and proceed with context.\n<br>\n:::\n\nAfter inspecting the data beforehand to understand how it is structured and whether there are any footnotes relevant to our analysis, we can display our data in a table as follows:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# View Annex 4J of the 2023 World Malaria Report. Note that we remove the footnotes here.\n# The gt package is used for better formatting, but this is optional.\nwhowmr::wmr2023$wmr2023j |>\n  # Hide the footnotes\n  mutate(Country=`Country/area` |> stringr::str_remove(\"\\\\d.*$\")) |>\n  select(Country, `2010`:`2022`) |>\n  head() |>\n  gt() |>\n  tab_options(table.align = \"left\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"usciaqiljh\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#usciaqiljh table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#usciaqiljh thead, #usciaqiljh tbody, #usciaqiljh tfoot, #usciaqiljh tr, #usciaqiljh td, #usciaqiljh th {\n  border-style: none;\n}\n\n#usciaqiljh p {\n  margin: 0;\n  padding: 0;\n}\n\n#usciaqiljh .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: 0;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#usciaqiljh .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#usciaqiljh .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#usciaqiljh .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#usciaqiljh .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#usciaqiljh .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#usciaqiljh .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#usciaqiljh .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#usciaqiljh .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#usciaqiljh .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#usciaqiljh .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#usciaqiljh .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#usciaqiljh .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#usciaqiljh .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#usciaqiljh .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usciaqiljh .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#usciaqiljh .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#usciaqiljh .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#usciaqiljh .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usciaqiljh .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#usciaqiljh .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usciaqiljh .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#usciaqiljh .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usciaqiljh .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#usciaqiljh .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#usciaqiljh .gt_left {\n  text-align: left;\n}\n\n#usciaqiljh .gt_center {\n  text-align: center;\n}\n\n#usciaqiljh .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#usciaqiljh .gt_font_normal {\n  font-weight: normal;\n}\n\n#usciaqiljh .gt_font_bold {\n  font-weight: bold;\n}\n\n#usciaqiljh .gt_font_italic {\n  font-style: italic;\n}\n\n#usciaqiljh .gt_super {\n  font-size: 65%;\n}\n\n#usciaqiljh .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#usciaqiljh .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#usciaqiljh .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#usciaqiljh .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#usciaqiljh .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#usciaqiljh .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#usciaqiljh .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#usciaqiljh .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#usciaqiljh div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Country\">Country</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2010\">2010</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2011\">2011</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2012\">2012</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2013\">2013</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2014\">2014</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2015\">2015</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2016\">2016</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2017\">2017</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2018\">2018</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2019\">2019</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2020\">2020</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2021\">2021</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2022\">2022</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Algeria</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">1</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">0</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">0</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Angola</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">8114</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">6909</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">5736</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">7300</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">5714</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">7832</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">15997</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">13967</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">11814</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">18691</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">11757</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">13676</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">12474</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Benin</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">964</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">1753</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">2261</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">2288</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">1869</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">1416</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">1646</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">2182</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">2138</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">2589</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">2440</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">2990</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">2955</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Botswana</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">8</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">8</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">3</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">7</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">22</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">5</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">3</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">17</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">9</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">7</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">11</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">5</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">6</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Burkina Faso</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">9024</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">7001</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">7963</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">6294</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">5632</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">5379</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">3974</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">4144</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">4294</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">1060</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">3983</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">4355</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">4243</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Burundi</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">2677</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">2233</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">2263</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">3411</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">2974</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">3799</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">5853</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">4414</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">2481</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">3316</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">2276</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">2292</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">2374</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\nThe E8 countries are Botswana, Eswatini, Namibia, South Africa, Angola, Mozambique, Zambia, and Zimbabwe. To filter the data for these countries, you can use the following code:\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Define the E8 countries\ne8_countries <- c(\"Botswana\", \"Eswatini\", \"Namibia\", \"South Africa\", \"Angola\", \"Mozambique\", \"Zambia\", \"Zimbabwe\")\n\n# Filter the data for the E8 countries\nwmr2023j_e8 <- whowmr::wmr2023$wmr2023j |>\n  filter(`Country/area` %in% e8_countries) |>\n  rename(Country=\"Country/area\") |>\n  select(!`WHO Region`) # Remove the WHO Region column\n\n# View the filtered dataset\ngt(wmr2023j_e8)|>\n  tab_options(table.align = \"left\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"fqxmgrqdte\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#fqxmgrqdte table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#fqxmgrqdte thead, #fqxmgrqdte tbody, #fqxmgrqdte tfoot, #fqxmgrqdte tr, #fqxmgrqdte td, #fqxmgrqdte th {\n  border-style: none;\n}\n\n#fqxmgrqdte p {\n  margin: 0;\n  padding: 0;\n}\n\n#fqxmgrqdte .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: 0;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#fqxmgrqdte .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#fqxmgrqdte .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#fqxmgrqdte .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#fqxmgrqdte .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#fqxmgrqdte .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#fqxmgrqdte .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#fqxmgrqdte .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#fqxmgrqdte .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#fqxmgrqdte .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#fqxmgrqdte .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#fqxmgrqdte .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#fqxmgrqdte .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#fqxmgrqdte .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#fqxmgrqdte .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fqxmgrqdte .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#fqxmgrqdte .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#fqxmgrqdte .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#fqxmgrqdte .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fqxmgrqdte .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#fqxmgrqdte .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fqxmgrqdte .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#fqxmgrqdte .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fqxmgrqdte .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#fqxmgrqdte .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#fqxmgrqdte .gt_left {\n  text-align: left;\n}\n\n#fqxmgrqdte .gt_center {\n  text-align: center;\n}\n\n#fqxmgrqdte .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#fqxmgrqdte .gt_font_normal {\n  font-weight: normal;\n}\n\n#fqxmgrqdte .gt_font_bold {\n  font-weight: bold;\n}\n\n#fqxmgrqdte .gt_font_italic {\n  font-style: italic;\n}\n\n#fqxmgrqdte .gt_super {\n  font-size: 65%;\n}\n\n#fqxmgrqdte .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#fqxmgrqdte .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#fqxmgrqdte .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#fqxmgrqdte .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#fqxmgrqdte .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#fqxmgrqdte .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#fqxmgrqdte .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#fqxmgrqdte .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#fqxmgrqdte div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Country\">Country</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2010\">2010</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2011\">2011</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2012\">2012</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2013\">2013</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2014\">2014</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2015\">2015</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2016\">2016</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2017\">2017</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2018\">2018</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2019\">2019</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2020\">2020</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2021\">2021</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"a2022\">2022</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Angola</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">8114</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">6909</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">5736</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">7300</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">5714</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">7832</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">15997</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">13967</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">11814</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">18691</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">11757</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">13676</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">12474</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Botswana</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">8</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">8</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">3</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">7</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">22</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">5</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">3</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">17</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">9</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">7</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">11</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">5</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">6</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Eswatini</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">8</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">1</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">3</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">4</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">4</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">5</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">3</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">20</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">2</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">3</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">2</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">7</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">4</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Mozambique</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">3354</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">3086</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">2818</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">2941</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">3245</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">2467</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">1685</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">1114</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">968</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">734</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">563</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">408</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">423</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Namibia</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">63</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">36</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">4</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">21</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">61</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">32</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">65</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">57</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">58</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">6</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">35</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">14</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">28</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">South Africa</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">83</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">54</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">72</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">105</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">174</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">110</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">34</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">301</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">69</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">79</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">38</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">56</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">29</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Zambia</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">4834</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">4540</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">3705</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">3548</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">3257</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">2389</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">1827</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">1425</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">1209</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">1339</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">1972</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">1503</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">1361</td></tr>\n    <tr><td headers=\"Country\" class=\"gt_row gt_left\">Zimbabwe</td>\n<td headers=\"2010\" class=\"gt_row gt_right\">255</td>\n<td headers=\"2011\" class=\"gt_row gt_right\">451</td>\n<td headers=\"2012\" class=\"gt_row gt_right\">351</td>\n<td headers=\"2013\" class=\"gt_row gt_right\">352</td>\n<td headers=\"2014\" class=\"gt_row gt_right\">406</td>\n<td headers=\"2015\" class=\"gt_row gt_right\">200</td>\n<td headers=\"2016\" class=\"gt_row gt_right\">351</td>\n<td headers=\"2017\" class=\"gt_row gt_right\">527</td>\n<td headers=\"2018\" class=\"gt_row gt_right\">192</td>\n<td headers=\"2019\" class=\"gt_row gt_right\">266</td>\n<td headers=\"2020\" class=\"gt_row gt_right\">400</td>\n<td headers=\"2021\" class=\"gt_row gt_right\">131</td>\n<td headers=\"2022\" class=\"gt_row gt_right\">177</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n\n\n\n\n\n<h2>How to plot this data?</h2>\n\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(stringr)\n\n# Create the lollipop plot\nggplot(wmr2023Ea_Africa, aes(x = fct_reorder(Country, ITNCovPercent, .na_rm = FALSE),\n                             y = ITNCovPercent,\n                             color = Source)) +\n  geom_segment(aes(x = Country, xend = Country, y = 0, yend = ITNCovPercent), color = \"grey\") +  # Keep constant grey color for segments\n  geom_point(size = 4) +\n  coord_flip() +  # Adjust the aspect ratio to make the plot taller\n  scale_colour_manual_health_radar() +  # Correct color scale for the discrete 'Source' variable\n  theme_health_radar() +\n  labs(title = \"Percentage of Households with at least one ITN\",\n       subtitle = \"Data for selected African countries\",\n       caption = str_wrap(\"The percentage of households with at least one insecticide-treated net (ITN) in selected African countries, highlighting variations in ITN coverage. Benin,and Mozambique exhibit the highest coverage, while Kenya and Nigeria have the lowest. Most countries have coverage between 50% and 60%, which supports malaria control efforts if ITNs are properly used and resistance to insecticides remains low. Source: WMR 2023 Annex 4Ea.\", width = 75),\n       x = \"Country\",\n       y = \"Percentage\") \n```\n\n::: {.cell-output-display}\n![](who_wmr_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggrepel)\nlibrary(sf)\nlibrary(rnaturalearth)\nlibrary(rnaturalearthdata)\nlibrary(whowmr)\n\n# Define the elimination 8 countries\ne8_countries <- c(\"Botswana\", \"Eswatini\", \"Namibia\", \"South Africa\", \"Angola\", \"Mozambique\", \"Zambia\", \"Zimbabwe\")\n\n# Load the map data for Africa\ne8_africa <- ne_countries(continent = \"Africa\", returnclass = \"sf\") |>\n  mutate(name = if_else(name==\"eSwatini\", \"Eswatini\", name)) |>\n  filter(name %in% e8_countries)\n\n# Merge the map data with your data\ne8_data <- e8_africa |>\n  left_join(wmr2023$wmr2023j |> mutate(), by = c(\"name\" = \"Country/area\"))\n\n# Create the choropleth map\nggplot(data = e8_data) +\n  geom_sf(aes(fill = `2022`), color = \"lightgrey\", size = 0.3) +  # Use fill for the continuous 2022 data\n  theme_health_radar() +\n  scale_fill_continuous_health_radar(name = \"Deaths\") +  # Correct fill scale for continuous data\n  labs(title = \"Reported malaria deaths in the Elimination 8 countries (2022)\",\n       caption = str_wrap(\"The choropleth map highlights reported malaria deaths in the Elimination 8 countries in 2022, with Angola, Mozambique, and Zambia showing higher mortality rates. These reported figures may not reflect the full scale of malaria deaths due to potential underreporting and misclassification. Considering estimated deaths alongside reported figures would provide a more comprehensive picture. Source: WMR 2023 Annex 4J.\", width = 80)\n,\n       x = \"Latitude\",\n       y = \"Longitude\") +\n  \n  geom_sf_text(aes(label = name, color = ifelse(`2022` > mean(`2022`), \"black\", \"white\")), size = 3) +  # Conditional text color\n  scale_color_identity() +  \n  theme(\n    plot.caption.position = \"plot\",  # Keep the caption outside the plot area\n  )\n```\n\n::: {.cell-output-display}\n![](who_wmr_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nwhowmr::wmr2023$wmr2023f |>\n  # Filter for the frontline E8 countries\n  filter(`Country/area` |> stringr::str_detect(\"Botswana|Eswatini|Namibia|South Africa\"),\n         # We couldn't get opt_interactive to work with grouped rows so we'll just display fewer columns\n         Year>=2020) |>\n  # Rename columns to something more readable\n  rename(Country=\"Country/area\", `Population at risk`=\"Population denominator for incidence and mortality rate\") |>\n  # Hide the footnotes\n  mutate(Country=Country |> stringr::str_remove(\"\\\\d.*$\")) |> \n  # Remove the WHO Region column\n  select(!`WHO Region`) |>\n  gt(\n    groupname_col = \"Country\",\n    row_group_as_column = TRUE\n  ) |>\n  tab_header(title=\"Population at risk and estimated malaria cases and deaths in the E8 frontline countries\",\n             subtitle=\"Data from WMR 2023 Annex 4F\") |>\n  # Control how NA values are displayed\n  sub_missing(columns = everything(), missing_text = \"-\") |>\n  # Group the Cases and Deaths columns and rename, eg, Cases_Lower to just Lower\n  cols_label_with(columns = starts_with(\"Cases\")|starts_with(\"Deaths\"), fn=~stringr::str_remove_all(., \".+_\")) |>\n  tab_spanner(label=\"Cases\", columns=starts_with(\"Cases\")) |> \n  tab_spanner(label=\"Deaths\", columns=starts_with(\"Deaths\")) |>\n  # Format the numbers to be more readable\n  fmt_number(columns=c(`Population at risk`,starts_with(\"Cases\")|starts_with(\"Deaths\")), suffixing = T) |>\n  # Country column should be bold:\n  tab_style(\n    style = cell_text(weight = \"bold\"),\n    locations = cells_row_groups()\n  ) |>\n  tab_style(\n    style = cell_borders(\n      sides = c(\"left\"),\n      weight = px(1)),\n    locations = cells_body(\n      columns = c(Year, `Population at risk`, Cases_Lower, Deaths_Lower)\n    )\n  ) |>\n  tab_style(\n    style = cell_borders(\n      sides = c(\"right\"),\n      weight = px(1)),\n    locations = cells_body(\n      columns = c(Deaths_Upper)\n    )\n  )|>\n  tab_options(table.align = \"left\")\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div id=\"vhbktbqiyp\" style=\"padding-left:0px;padding-right:0px;padding-top:10px;padding-bottom:10px;overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>#vhbktbqiyp table {\n  font-family: system-ui, 'Segoe UI', Roboto, Helvetica, Arial, sans-serif, 'Apple Color Emoji', 'Segoe UI Emoji', 'Segoe UI Symbol', 'Noto Color Emoji';\n  -webkit-font-smoothing: antialiased;\n  -moz-osx-font-smoothing: grayscale;\n}\n\n#vhbktbqiyp thead, #vhbktbqiyp tbody, #vhbktbqiyp tfoot, #vhbktbqiyp tr, #vhbktbqiyp td, #vhbktbqiyp th {\n  border-style: none;\n}\n\n#vhbktbqiyp p {\n  margin: 0;\n  padding: 0;\n}\n\n#vhbktbqiyp .gt_table {\n  display: table;\n  border-collapse: collapse;\n  line-height: normal;\n  margin-left: 0;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_caption {\n  padding-top: 4px;\n  padding-bottom: 4px;\n}\n\n#vhbktbqiyp .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#vhbktbqiyp .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 3px;\n  padding-bottom: 5px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#vhbktbqiyp .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#vhbktbqiyp .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#vhbktbqiyp .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#vhbktbqiyp .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#vhbktbqiyp .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#vhbktbqiyp .gt_spanner_row {\n  border-bottom-style: hidden;\n}\n\n#vhbktbqiyp .gt_group_heading {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  text-align: left;\n}\n\n#vhbktbqiyp .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#vhbktbqiyp .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#vhbktbqiyp .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#vhbktbqiyp .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#vhbktbqiyp .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vhbktbqiyp .gt_stub_row_group {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 5px;\n  padding-right: 5px;\n  vertical-align: top;\n}\n\n#vhbktbqiyp .gt_row_group_first td {\n  border-top-width: 2px;\n}\n\n#vhbktbqiyp .gt_row_group_first th {\n  border-top-width: 2px;\n}\n\n#vhbktbqiyp .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vhbktbqiyp .gt_first_summary_row {\n  border-top-style: solid;\n  border-top-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_first_summary_row.thick {\n  border-top-width: 2px;\n}\n\n#vhbktbqiyp .gt_last_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vhbktbqiyp .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_last_grand_summary_row_top {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-bottom-style: double;\n  border-bottom-width: 6px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#vhbktbqiyp .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vhbktbqiyp .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#vhbktbqiyp .gt_sourcenote {\n  font-size: 90%;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#vhbktbqiyp .gt_left {\n  text-align: left;\n}\n\n#vhbktbqiyp .gt_center {\n  text-align: center;\n}\n\n#vhbktbqiyp .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#vhbktbqiyp .gt_font_normal {\n  font-weight: normal;\n}\n\n#vhbktbqiyp .gt_font_bold {\n  font-weight: bold;\n}\n\n#vhbktbqiyp .gt_font_italic {\n  font-style: italic;\n}\n\n#vhbktbqiyp .gt_super {\n  font-size: 65%;\n}\n\n#vhbktbqiyp .gt_footnote_marks {\n  font-size: 75%;\n  vertical-align: 0.4em;\n  position: initial;\n}\n\n#vhbktbqiyp .gt_asterisk {\n  font-size: 100%;\n  vertical-align: 0;\n}\n\n#vhbktbqiyp .gt_indent_1 {\n  text-indent: 5px;\n}\n\n#vhbktbqiyp .gt_indent_2 {\n  text-indent: 10px;\n}\n\n#vhbktbqiyp .gt_indent_3 {\n  text-indent: 15px;\n}\n\n#vhbktbqiyp .gt_indent_4 {\n  text-indent: 20px;\n}\n\n#vhbktbqiyp .gt_indent_5 {\n  text-indent: 25px;\n}\n\n#vhbktbqiyp .katex-display {\n  display: inline-flex !important;\n  margin-bottom: 0.75em !important;\n}\n\n#vhbktbqiyp div.Reactable > div.rt-table > div.rt-thead > div.rt-tr.rt-tr-group-header > div.rt-th-group:after {\n  height: 0px !important;\n}\n</style>\n<table class=\"gt_table\" data-quarto-disable-processing=\"false\" data-quarto-bootstrap=\"false\">\n  <thead>\n    <tr class=\"gt_heading\">\n      <td colspan=\"9\" class=\"gt_heading gt_title gt_font_normal\" style>Population at risk and estimated malaria cases and deaths in the E8 frontline countries</td>\n    </tr>\n    <tr class=\"gt_heading\">\n      <td colspan=\"9\" class=\"gt_heading gt_subtitle gt_font_normal gt_bottom_border\" style>Data from WMR 2023 Annex 4F</td>\n    </tr>\n    <tr class=\"gt_col_headings gt_spanner_row\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"a::stub\"></th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Year\">Year</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"2\" colspan=\"1\" scope=\"col\" id=\"Population-at-risk\">Population at risk</th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"3\" scope=\"colgroup\" id=\"Cases\">\n        <div class=\"gt_column_spanner\">Cases</div>\n      </th>\n      <th class=\"gt_center gt_columns_top_border gt_column_spanner_outer\" rowspan=\"1\" colspan=\"3\" scope=\"colgroup\" id=\"Deaths\">\n        <div class=\"gt_column_spanner\">Deaths</div>\n      </th>\n    </tr>\n    <tr class=\"gt_col_headings\">\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Cases_Lower\">Lower</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Cases_Point\">Point</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Cases_Upper\">Upper</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Deaths_Lower\">Lower</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Deaths_Point\">Point</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\" scope=\"col\" id=\"Deaths_Upper\">Upper</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr class=\"gt_row_group_first\"><td headers=\"Botswana stub_1_1 stub_1\" rowspan=\"3\" class=\"gt_row gt_left gt_stub_row_group\" style=\"font-weight: bold;\">Botswana</td>\n<td headers=\"Botswana stub_1_1 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2020</td>\n<td headers=\"Botswana stub_1_1 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">1.69M</td>\n<td headers=\"Botswana stub_1_1 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">1.20K</td>\n<td headers=\"Botswana stub_1_1 Cases_Point\" class=\"gt_row gt_right\">1.76K</td>\n<td headers=\"Botswana stub_1_1 Cases_Upper\" class=\"gt_row gt_right\">2.70K</td>\n<td headers=\"Botswana stub_1_1 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Botswana stub_1_1 Deaths_Point\" class=\"gt_row gt_right\">11.00</td>\n<td headers=\"Botswana stub_1_1 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr><td headers=\"Botswana Year_2 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2021</td>\n<td headers=\"Botswana Year_2 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">1.72M</td>\n<td headers=\"Botswana Year_2 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">820.00</td>\n<td headers=\"Botswana Year_2 Cases_Point\" class=\"gt_row gt_right\">1.06K</td>\n<td headers=\"Botswana Year_2 Cases_Upper\" class=\"gt_row gt_right\">1.50K</td>\n<td headers=\"Botswana Year_2 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Botswana Year_2 Deaths_Point\" class=\"gt_row gt_right\">5.00</td>\n<td headers=\"Botswana Year_2 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr><td headers=\"Botswana Year_3 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2022</td>\n<td headers=\"Botswana Year_3 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">1.74M</td>\n<td headers=\"Botswana Year_3 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">420.00</td>\n<td headers=\"Botswana Year_3 Cases_Point\" class=\"gt_row gt_right\">542.00</td>\n<td headers=\"Botswana Year_3 Cases_Upper\" class=\"gt_row gt_right\">740.00</td>\n<td headers=\"Botswana Year_3 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Botswana Year_3 Deaths_Point\" class=\"gt_row gt_right\">6.00</td>\n<td headers=\"Botswana Year_3 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Eswatini stub_1_4 stub_1\" rowspan=\"3\" class=\"gt_row gt_left gt_stub_row_group\" style=\"font-weight: bold;\">Eswatini</td>\n<td headers=\"Eswatini stub_1_4 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2020</td>\n<td headers=\"Eswatini stub_1_4 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">330.58K</td>\n<td headers=\"Eswatini stub_1_4 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Eswatini stub_1_4 Cases_Point\" class=\"gt_row gt_right\">233.00</td>\n<td headers=\"Eswatini stub_1_4 Cases_Upper\" class=\"gt_row gt_right\">-</td>\n<td headers=\"Eswatini stub_1_4 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Eswatini stub_1_4 Deaths_Point\" class=\"gt_row gt_right\">2.00</td>\n<td headers=\"Eswatini stub_1_4 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr><td headers=\"Eswatini Year_5 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2021</td>\n<td headers=\"Eswatini Year_5 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">333.83K</td>\n<td headers=\"Eswatini Year_5 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Eswatini Year_5 Cases_Point\" class=\"gt_row gt_right\">505.00</td>\n<td headers=\"Eswatini Year_5 Cases_Upper\" class=\"gt_row gt_right\">-</td>\n<td headers=\"Eswatini Year_5 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Eswatini Year_5 Deaths_Point\" class=\"gt_row gt_right\">5.00</td>\n<td headers=\"Eswatini Year_5 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr><td headers=\"Eswatini Year_6 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2022</td>\n<td headers=\"Eswatini Year_6 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">336.47K</td>\n<td headers=\"Eswatini Year_6 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Eswatini Year_6 Cases_Point\" class=\"gt_row gt_right\">214.00</td>\n<td headers=\"Eswatini Year_6 Cases_Upper\" class=\"gt_row gt_right\">-</td>\n<td headers=\"Eswatini Year_6 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Eswatini Year_6 Deaths_Point\" class=\"gt_row gt_right\">4.00</td>\n<td headers=\"Eswatini Year_6 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"Namibia stub_1_7 stub_1\" rowspan=\"3\" class=\"gt_row gt_left gt_stub_row_group\" style=\"font-weight: bold;\">Namibia</td>\n<td headers=\"Namibia stub_1_7 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2020</td>\n<td headers=\"Namibia stub_1_7 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">1.98M</td>\n<td headers=\"Namibia stub_1_7 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">16.00K</td>\n<td headers=\"Namibia stub_1_7 Cases_Point\" class=\"gt_row gt_right\">20.19K</td>\n<td headers=\"Namibia stub_1_7 Cases_Upper\" class=\"gt_row gt_right\">25.00K</td>\n<td headers=\"Namibia stub_1_7 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Namibia stub_1_7 Deaths_Point\" class=\"gt_row gt_right\">35.00</td>\n<td headers=\"Namibia stub_1_7 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr><td headers=\"Namibia Year_8 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2021</td>\n<td headers=\"Namibia Year_8 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2.01M</td>\n<td headers=\"Namibia Year_8 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">17.00K</td>\n<td headers=\"Namibia Year_8 Cases_Point\" class=\"gt_row gt_right\">21.32K</td>\n<td headers=\"Namibia Year_8 Cases_Upper\" class=\"gt_row gt_right\">26.00K</td>\n<td headers=\"Namibia Year_8 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Namibia Year_8 Deaths_Point\" class=\"gt_row gt_right\">14.00</td>\n<td headers=\"Namibia Year_8 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr><td headers=\"Namibia Year_9 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2022</td>\n<td headers=\"Namibia Year_9 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2.04M</td>\n<td headers=\"Namibia Year_9 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">13.00K</td>\n<td headers=\"Namibia Year_9 Cases_Point\" class=\"gt_row gt_right\">16.89K</td>\n<td headers=\"Namibia Year_9 Cases_Upper\" class=\"gt_row gt_right\">21.00K</td>\n<td headers=\"Namibia Year_9 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"Namibia Year_9 Deaths_Point\" class=\"gt_row gt_right\">28.00</td>\n<td headers=\"Namibia Year_9 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr class=\"gt_row_group_first\"><td headers=\"South Africa stub_1_10 stub_1\" rowspan=\"3\" class=\"gt_row gt_left gt_stub_row_group\" style=\"font-weight: bold;\">South Africa</td>\n<td headers=\"South Africa stub_1_10 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2020</td>\n<td headers=\"South Africa stub_1_10 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">5.88M</td>\n<td headers=\"South Africa stub_1_10 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"South Africa stub_1_10 Cases_Point\" class=\"gt_row gt_right\">4.46K</td>\n<td headers=\"South Africa stub_1_10 Cases_Upper\" class=\"gt_row gt_right\">-</td>\n<td headers=\"South Africa stub_1_10 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"South Africa stub_1_10 Deaths_Point\" class=\"gt_row gt_right\">38.00</td>\n<td headers=\"South Africa stub_1_10 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr><td headers=\"South Africa Year_11 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2021</td>\n<td headers=\"South Africa Year_11 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">5.94M</td>\n<td headers=\"South Africa Year_11 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"South Africa Year_11 Cases_Point\" class=\"gt_row gt_right\">2.97K</td>\n<td headers=\"South Africa Year_11 Cases_Upper\" class=\"gt_row gt_right\">-</td>\n<td headers=\"South Africa Year_11 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"South Africa Year_11 Deaths_Point\" class=\"gt_row gt_right\">56.00</td>\n<td headers=\"South Africa Year_11 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n    <tr><td headers=\"South Africa Year_12 Year\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">2022</td>\n<td headers=\"South Africa Year_12 Population at risk\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">5.99M</td>\n<td headers=\"South Africa Year_12 Cases_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"South Africa Year_12 Cases_Point\" class=\"gt_row gt_right\">2.04K</td>\n<td headers=\"South Africa Year_12 Cases_Upper\" class=\"gt_row gt_right\">-</td>\n<td headers=\"South Africa Year_12 Deaths_Lower\" class=\"gt_row gt_right\" style=\"border-left-width: 1px; border-left-style: solid; border-left-color: #000000;\">-</td>\n<td headers=\"South Africa Year_12 Deaths_Point\" class=\"gt_row gt_right\">29.00</td>\n<td headers=\"South Africa Year_12 Deaths_Upper\" class=\"gt_row gt_right\" style=\"border-right-width: 1px; border-right-style: solid; border-right-color: #000000;\">-</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create the plot for Deaths with low and high bands\nwhowmr::wmr2023$wmr2023f |>\n  # Filter for the E8 countries\n  filter(`Country/area` |> stringr::str_detect(\"Angola|Botswana|Eswatini|Malawi|Mozambique|Namibia|South Africa|Zambia|Zimbabwe\")) |>\n  # Rename columns to something more readable\n  rename(Country=\"Country/area\", `Population at risk`=\"Population denominator for incidence and mortality rate\") |>\n  # Hide the footnotes\n  mutate(Country=Country |> stringr::str_remove(\"\\\\d.*$\")) |> \n  # Remove the WHO Region column\n  select(!`WHO Region`) |> \n  ggplot(aes(x = Year, y = Cases_Point, group = Country, color = Country)) +\n    geom_line(linewidth = 1) +\n    geom_ribbon(aes(ymin = Cases_Lower, ymax = Cases_Upper, fill = Country), alpha = 0.2) +  # Corrected to use 'fill' for the ribbon\n    scale_colour_manual_health_radar() +  # Apply manual color scale for 'color' aesthetic (lines)\n    scale_fill_manual_health_radar() +    # Apply manual color scale for 'fill' aesthetic (ribbon fill)\n    theme_health_radar() +\n    labs(\n      title = \"Estimated Malaria Cases (2000-2022)\",\n      subtitle = \"With confidence bands\",\n      x = \"Year\",\n      y = \"Number of Cases (thousands)\",\n      color = \"Country\",\n      fill = \"Country\",  # Added 'fill' label for the ribbon shading\n      caption = str_wrap(\"The plot displays estimated malaria cases in selected countries from 2000 to 2022, with lines representing case estimates and shaded areas showing the confidence bands. Variations in case numbers and uncertainty across countries are evident, such as stable case numbers in Mozambique, while Angola saw fluctuating cases with increasing uncertainty after 2015. Source: WMR 2023 Annex 4F.\", width = 85)\n\n    )\n```\n\n::: {.cell-output-display}\n![](who_wmr_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n# Read in the costing data\ncosting_df <- read_csv(\"tutorial_data/costing_df.csv\")\n\n# Reshape data for plotting\nplot_df <- costing_df |>\n  pivot_longer(cols = starts_with(\"Country_\"), names_to = \"Donor\", values_to = \"Amount\") |>\n  mutate(Donor = gsub(\"Country_\", \"\", Donor)) # Remove \"Country_\" from the Donor names\n\n# Set the order of the donors so that \"Govt_NMP\" is last\nplot_df$Donor <- factor(plot_df$Donor, levels = c(\n  \"GlobalFund\", \"WorldBank\", \"PMI_USAID\", \"OtherBilaterals\", \n  \"WHO\", \"UNICEF\",\"Govt_NMP\", \"OtherContributions\"\n))\n\n# Create the plot\nggplot(plot_df, aes(x = Year, y = Amount / 1000, fill = Donor)) +\n  geom_bar(stat = \"identity\", position = \"stack\") +\n  facet_wrap(~ Country, scales = \"free_y\") +\n  scale_fill_manual_health_radar() +  # Apply the custom fill scale for 'Donor'\n  labs(\n    title = \"Stacked Bar Plot of Country Contributions (2020-2022)\",\n    subtitle = \"For Selected Countries\",\n    x = \"Year\",\n    y = \"Contributions (in thousands)\",\n    fill = \"Donor\",\n    caption = str_wrap(\"The stacked bar plot shows donor contributions to malaria control efforts in selected countries from 2020 to 2022. Contributions vary by country and donor, with Mozambique receiving significant support from the Global Fund and PMI/USAID, while in South Africa, the Global Fund and local government are key contributors. Understanding the distribution of funding is essential for evaluating the sustainability and impact of malaria control programs. Source: WMR 2023 4C.\", width = 100)\n  ) +\n  theme_health_radar()  # Apply the custom radar theme\n```\n\n::: {.cell-output-display}\n![](who_wmr_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n:::\n\n\n\n\n\n<h2>How can this data be used in disease modelling?</h2>\n\n### Preparing the data \n\nWe obtain case data from Angola for the years 2000 to 2022. We use this data to calibrate our disease models, by fitting model outputs to observed data from the World Malaria Report. Throughout the calibration process we adjust the initial parameters we input into the model, making the model more accurate and representative of actual disease dynamics in a specific context. These parameters represent specific dynamics occurring the in the modelled context, for instance ITN usage $itn_{use}$ may be really high in Angola, or the dominant *Anopheles* vector may have a higher biting rate $a$. Country-specific parameter values should be obtained from existing datasets such as DHS surveys, published reports from national control programs and other stakeholders, literature review and expert knowledge. This data carries a level of uncertainty that may prevent the model from making accurate projections.\n\nFor this example, we fit a simple malaria model to incidence rates calculated from case data from Angola. \nWhile it is simpler to fit to case numbers, fitting to incidence rates allows us to capture the disease burden relative to a changing population size, and is better for comparing burden across different populations. Here, we calculate incidence rate per 1000 of the population at risk with the following formula: $$ Incidence.rate = \\frac{Cases}{Population.at.risk} \\times 1000 $$\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nobserved_data <- whowmr::wmr2023$wmr2023f |>\n  # Filter for Angola\n  filter(`Country/area` == \"Angola\") |>\n  rename(Population_at_risk =\"Population denominator for incidence and mortality rate\") |>\n  select(Year, Cases_Lower, Cases_Point, Cases_Upper, Population_at_risk) |> \n  # Calculate the incidence rate\n  mutate(inci_rate = Cases_Point/Population_at_risk*1000,\n         inci_rate_lower = Cases_Lower/Population_at_risk*1000,\n         inci_rate_upper = Cases_Upper/Population_at_risk*1000) \n\nobserved_data |> \n  ggplot() +\n  #geom_pointrange(aes(x = Year, y = Cases_Point, ymin = Cases_Lower, ymax = Cases_Upper), colour = theme_health_radar_colours[15]) + # to see case numbers\n  geom_pointrange(aes(x = Year, y = inci_rate, ymin = inci_rate_lower, ymax = inci_rate_upper), colour = theme_health_radar_colours[9]) +\n  labs(title = \"Malaria incidence rate in Angola from 2000 to 2022\",\n       subtitle = \"Malaria presumed and confirmed case data as at 23 October 2023\",\n       y = \"Cases per 1000\",\n       caption = str_wrap(\"We see that the incidence rate for malaria in Angola has generally decreased over time, but rose again after 2014. We also note wide lower and upper ranges of the data, indicating a high level of uncertainty in the exact estimate of the incidence rate. Source: World Malaria Report 2023, Annex 4-F.\")) +\n  theme_health_radar()\n```\n\n::: {.cell-output-display}\n![](who_wmr_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n\n\n### Model Assumptions\n\nWe assume that the vector population is at equilibrium, and that ITNs are a widely-used control intervention in Angola. For more details on how to incorporate ITNs and calculating effective coverage, see the [DHS](https://jfunction.quarto.pub/healthradar/radar/datasources/malaria/dhs-program/dhs.html) page.\nWe also assume the human population of Angola is constant. In a more complex model you would factor in realistic projections of population growth over time, as well as malaria-induced deaths.\n\n*Note*: The ITN data in this model is simulated. Additional interventions such as treatment or larviciding (as may be specific to Angola) have not been factored in this simple example.\n\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nset.seed(50) # for reproducibility\n\n# Time points for the simulation\nW = 10 # model warm up\nY = 23 # years of simulation\ntimes <- seq(0, 365*(Y+W), by = 1)\n\nitndata <- data.frame(time = seq(0, by = 365, length.out = (Y+W)),\n                      nets = rnorm((Y+W), mean = 9000000, sd = 1000000)\n                    ) \n\n# Make a time dependent variable of ITN coverage\nitn_cov <- approxfun(itndata$time, itndata$nets, n = 365*(Y), ties = \"ordered\", method = \"constant\", rule = 2)\n\n# SEACR-SEI model\nseacr <- function(times, start, parameters, itnfunc) { \n  with(as.list(c(start, parameters)), {\n    P = S + E + A + C + R \n    M = Sm + Em + Im\n    m = M / P\n    \n    #Fixed parameters\n    b = 0.5 # probability of transmission from mosquito to human\n    c = 0.5 # probability of transmission from human to mosquito\n    r = 1/7 # rate of loss of infectiousness after treatment\n    delta = 1/200 # natural recovery rate\n    mu_m <- 1/10 # birth and death rate of mosquitoes\n    mu_h = 1/(55*365) # birth and death rate of humans\n    gamma_m = 1/10 # extrinsic incubation rate of parasite in mosquitoes\n    gamma_h = 1/10 # extrinsic incubation rate of parasite in humans\n    phi = 200 # phase angle; start of season\n    ppn = 1.8 # persons per net\n    attr = 0.7 # nets remaining after 3 years in circulation\n    itn_use = 0.6 # probability of sleeping under a net\n    itn_death = 1/(3*365) # median net survival is three years\n\n    seas.t <- amp * (1 + cos(2 * pi * (times / 365 - phi)))\n    \n    itn_dist <- (itn_cov(times))/365*ppn/P    \n    \n    eta <- -log(1-(1-attr))/(3*365) #loss due to attrition over 3 years\n    itn = min(ITN,1)*itn_use*itn_eff # Proportion of population covered by ITN should never be more than 1\n    \n    # Force of infection\n    Infectious = C + zeta_a*A #infectious reservoir\n    lambda = ((a^2*b*c*m*Infectious/P)/(a*c*Infectious/P+mu_m)*(gamma_m/(gamma_m+mu_m)))*seas.t*(1-itn)\n    \n    # Differential equations/rate of change\n    dSm = 0\n    dEm = 0\n    dIm = 0\n    \n    dS = mu_h*P - lambda*S + rho*R - mu_h*S\n    dE = lambda*S - (gamma_h + mu_h)*E\n    dA = pa*gamma_h*E - (delta + mu_h)*A\n    dC = (1-pa)*gamma_h*E - (r + mu_h)*C\n    dR = delta*A + r*C - (rho + mu_h)*R\n    \n    dCInc = lambda*S\n    dITN = itn_dist - (eta + itn_death)*ITN \n    \n    # Output\n    list(c(dSm, dEm, dIm, dS, dE, dA, dC, dR, dCInc, dITN))\n  })\n}\n\n\n# Initial values for compartments\ninitial_state <- c(Sm = 20000000, # susceptible mosquitoes\n                   Em = 20000000, # exposed and infected mosquitoes\n                   Im = 20000000, # infectious mosquitoes\n                   S = 16000000, # susceptible humans\n                   E = 12000000, # exposed and infected humans\n                   A = 6000000, # asymptomatic and infectious humans\n                   C = 3000000, # clinical and symptomatic humans\n                   R = 0, # recovered and semi-immune humans\n                   CInc = 0, # cumulative incidence\n                   ITN = 0.5 # proportion of the population with potential to be protected by nets CURRENTLY IN CIRCULATION\n)\n\n# Initial parameter estimates\ninitial_parameters <- c(a = 0.3, # human biting rate\n                        amp = 0.6, # amplitude of seasonality\n                rho = 1/200, # rate of loss of immunity after recovery\n                zeta_a = 0.48, # relative infectiousness of asymptomatic infections\n                pa = 0.1, # probability of asymptomatic infection\n                itn_eff = 0.6 #effectiveness of nets in reducing infectious bites\n                )\n\n# Run the model\n\nout <- ode(y = initial_state, \n           times = times, \n           func = seacr, \n           parms = initial_parameters,\n           itnfunc = itnfunc)\n\n# Post-processing model output into a dataframe\n\nmo <- as_tibble(as.data.frame(out)) |> \n  mutate(P = S + E + A + C + R,\n         M = Sm + Em + Im,\n         Inc = c(0, diff(CInc))) |> \n  pivot_longer(cols = -time, names_to = \"variable\", values_to = \"value\") |> \n  filter(time > W*365) |> \n  mutate(date = ymd(\"1990-01-01\") + time)\n\n# Plotting incidence rate\n\npredicted_inci_rate <- mo |> \n  filter(variable %in% c(\"Inc\", \"P\")) |> \n  mutate(year = year(date)) |> \n  pivot_wider(names_from = variable, values_from = value) |>  \n  group_by(year) |>\n  summarize(\n    annual_inc = sum(Inc, na.rm = TRUE),\n    Pop = last(P)) |> # for Angola, the entire population is at risk\n  mutate(pred_inci_rate = annual_inc/Pop*1000) |> \n  filter(year > 1999, year < 2022)\n\n  ggplot() +\n  geom_line(data = predicted_inci_rate, aes(x = year, y = pred_inci_rate), colour = theme_health_radar_colours[16]) +\n  theme_health_radar() +\n  scale_colour_manual_health_radar() +\n  labs(x = \"Year\", \n         y = \"Incidence rate per 1000\", \n         title = \"Angola annual country-wide malaria incidence rates\",\n         caption = str_wrap(\"This plot illustrates the country-wide incidence rate of malaria from 2000 to 2022. We see that the incidence rate decreases after 2012. Source: Model output.\")) \n```\n\n::: {.cell-output-display}\n![](who_wmr_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n\n\n### Calibration\n\nFrom the plot above, we see the predicted incidence rate ranges between 560 and 600 cases per 1000, whereas the incidence rate in the observed data ranged between 100 and 5000 cases per 1000. To obtain a better fit, we calibrate the model using a period of data (2013 to 2018). It is computationally intensive to calibrate all the parameters used in the model, so we name a few criteria for selecting which parameters to fix (remain the same), and which to fit (new estimates obtained through calibration). We may:\n-   have less empirical support for certain values,\n-   suspect that a certain parameter has a large influence on the model output (prior to doing a sensitivity analysis),\n-   know a certain parameter to be driven by context-specific, unknown disease dynamics,\n-   find some parameters to be \"non-identifiable\" (this means that it is difficult to tease out which parameter is influencing the model input. For instance, probability of transmission from mosquito to human, $b$, and the probability of transmission from human to mosquito $c$, are multiplied to calculate the force of infection. Their relative contributions will be challenging to distinguish.)\n\nThere are fitting techniques for model calibration, such as Bayesian interference and sum of least squares. Here we use maximum likelihood to assess the model's fit to the data. This is done by defining the objective function. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Objective function: Negative log-likelihood\nnll_seacrs <- function(initial_parameters, observed_data) {\n\n  # Transform parameters to ensure they stay within a reasonable range, i.e. 0 to 1 for probabilities and positive for rates\n  transformed_parameters <- c(a <- exp(initial_parameters['a']),\n                              amp <- plogis(initial_parameters['amp']), # same as inverse logit, keeps range 0 to 1\n                              rho <- exp(initial_parameters['rho']),\n                              zeta_a <- plogis(initial_parameters['zeta_a']),\n                              pa <- plogis(initial_parameters['pa']),\n                              itn_eff <- plogis(initial_parameters['itn_eff'])\n                              )\n  \n                \n  # Solve the ODE model\n  pred_out <- ode(y = initial_state, times = times, func = seacr, parms = transformed_parameters, itnfunc = itnfunc)\n  model_output <- as.data.frame(pred_out)\n  \n  # Aggregate the daily incidence to yearly totals and calculate incidence rate\n  model_output$year <- floor(model_output$time / 365)  # Group by year\n  annual_incidence_rate  <- model_output |> \n    mutate(\n    P = S + E + A + C + R,\n    Inc = c(0, diff(CInc)),\n    year = year + 1999) |> \n    group_by(year) |> \n    summarise(annual_inc = sum(Inc),\n                P = last(P)) |> \n    mutate(pred_inci_rate = annual_inc/P*1000) |> \n    filter(year > 2000, year < 2020) # select years between 2000 and 2019 for fitting\n    \n  # Get model predictions for incidence rate\n  pred_IR <- annual_incidence_rate |>\n    pull(pred_inci_rate) |>\n    round()\n\n  # Incidence rate from observed data\n  observed_IR <- observed_data |>\n    filter(Year > 2000, Year < 2020) |>\n    pull(inci_rate) |>\n    round()\n\n  # Calculate the Poisson log-likelihood for clinical cases\n  log_likelihood_IR <- sum(dpois(observed_IR, lambda = pred_IR, log = TRUE))\n  \n  #cat(\"Parameters: \", initial_parameters, \"\\n\") \n  #cat(\"Log-likelihood: \", log_likelihood_IR, \"\\n\")\n\n  # Return the negative log-likelihood\n  return(-log_likelihood_IR)\n}\n\n\ninitial_transformed_parameters <- c(a <- log(initial_parameters[\"a\"]), \n                                    amp <-  qlogis(initial_parameters[\"amp\"]), # same as logit function, exp(x)/(1+exp(x))\n                                    rho <-  log(initial_parameters[\"rho\"]), \n                                    zeta_a <-  qlogis(initial_parameters[\"zeta_a\"]),\n                                    pa <-  qlogis(initial_parameters[\"pa\"]), \n                                    itn_eff <-  qlogis(initial_parameters[\"itn_eff\"])\n                                    )\n\n# Minimise the negative log-likelihood\nfit <- optim(par = as.list(initial_transformed_parameters), \n             fn = nll_seacrs, \n             observed_data = observed_data,\n             method = \"Nelder-Mead\")\n\n# New fitted parameters\nfitted_params <- fit$par\n\n# Back transform the parameters to bring them back to expected range\n\nbacktrans_params <- c(\n  a <- exp(fitted_params[\"a\"]),              # ln for exp-transformed parameters\n  amp <- plogis(fitted_params[\"amp\"]),       # qlogis for plogis-transformed parameters\n  rho <- exp(fitted_params[\"rho\"]),\n  zeta_a <- plogis(fitted_params[\"zeta_a\"]),\n  pa <- plogis(fitted_params[\"pa\"]),\n  itn_eff <- plogis(fitted_params[\"itn_eff\"])\n)\n\n# cbind(initial_parameters, backtrans_params) # compare initial parameters to newly estimated values\n\n# Run the model with new parameters\n\ncalibrated_model <- ode(y = initial_state, \n           times = times, \n           func = seacr, \n           parms = backtrans_params,\n           itnfunc = itnfunc)\n\n# Post-processing model output into a dataframe\n\ncalibrated_mo <- as_tibble(as.data.frame(calibrated_model)) |> \n  mutate(P = S + E + A + C + R,\n         M = Sm + Em + Im,\n         Inc = c(0, diff(CInc))) |> \n  pivot_longer(cols = -time, names_to = \"variable\", values_to = \"value\") |> \n  filter(time > W*365) |> \n  mutate(date = ymd(\"1990-01-01\") + time)\n\n# Plotting incidence rate\n\ncalibrated_inci_rate <- calibrated_mo |> \n  filter(variable %in% c(\"Inc\", \"P\")) |> \n  mutate(year = year(date)) |> \n  pivot_wider(names_from = variable, values_from = value) |>  # Spread Inc and P into columns\n  group_by(year) |>\n  summarize(\n    annual_inc = sum(Inc, na.rm = TRUE),\n    Pop = last(P)) |> \n  mutate(pred_inci_rate = annual_inc/Pop*1000) |> \n  filter(year > 1999, year < 2022) \n\n\n# Plot originally predicted values alongside output of newly calibrated model, and observed values\n  ggplot() +\n  geom_line(data = predicted_inci_rate |> mutate(label = \"Preliminary model\"), aes(x = year, y = pred_inci_rate, colour = label)) +\n  geom_line(data = calibrated_inci_rate |> mutate(label = \"Calibrated model\"), aes(x = year, y = pred_inci_rate, colour = label)) +\n  geom_pointrange(data = observed_data |> mutate(label = \"Observed data\"), aes(x = Year, y = inci_rate, ymin = inci_rate_lower, ymax = inci_rate_upper, colour = label)) +\n  theme_health_radar() +\n  scale_colour_manual_health_radar() +\n  labs(x = \"Year\", \n         y = \"Incidence rate per 1000\", \n       colour = \"Source\",\n         title = \"Modelled malaria incidence rates for Angola\",\n         caption = str_wrap(\"The plot above indicates the improved model projection of incidence rate as an output of the model. The calibrated model provides a better fit for the data. Source: Model output.\")) \n```\n\n::: {.cell-output-display}\n![](who_wmr_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n\n\nAfter calibration, the next step is to validate the model, ensuring that it continues to replicate data outside of the calibration period. In our case, we would use data from 2019 to 2022 to assess the model performance. A sensitivity analysis would help identify which parameters have the most influence on model outputs, and quantify the level of uncertainty in the parameters, further strengthening the reliability of the model.\n\n\n:::",
    "supporting": [
      "who_wmr_files\\figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}